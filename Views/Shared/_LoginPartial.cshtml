@inject Microsoft.AspNetCore.Http.IHttpContextAccessor HttpContextAccessor
@{
    var username = Context.Session.GetString("username");
}

<ul class="navbar-nav">
@if (!string.IsNullOrEmpty(username))
{
        <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" data-bs-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">Hello @HttpContextAccessor.HttpContext?.Session.GetString("username")</a>
            <div class="dropdown-menu">
                <a id="manage" class="nav-link" asp-controller="Account" asp-action="ChangePassword" title="Manage">Change Password</a>
                <a href="javascript:void(0);" class="nav-link" onclick="confirmLogout()">Logout</a>
            </div>
        </li>
}
</ul>

<script>

    function confirmLogout() {
        Swal.fire({
            title: 'Are you sure?',
            text: "You want to logout!",
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#d33',
            confirmButtonText: 'Yes'
        }).then((result) => {
            if (result.isConfirmed) {
                window.location.href = "@Url.Action("Logout", "Account")";
            }
        })
    }

</script>
